# ==========================================
# .codereview.yaml
# AI è‡ªåŠ¨ä»£ç å®¡æŸ¥é…ç½®
# ==========================================

version: 1.0

# ------------------------------------------
# åŸºç¡€è®¾ç½®
# ------------------------------------------
review:
  enabled: true # æ˜¯å¦å¯ç”¨è‡ªåŠ¨å®¡æŸ¥
  language: zh # å®¡æŸ¥è¯­è¨€ï¼Œå¯é€‰ zh / en
  mode: strict # å®¡æŸ¥æ¨¡å¼ï¼šlight / strict
  max_review_length: 4000 # å•æ¬¡å®¡æŸ¥è¾“å‡ºæœ€å¤§é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰
  max_files: 50 # è¶…è¿‡æ­¤æ–‡ä»¶æ•°è·³è¿‡å®¡æŸ¥
  max_content_length: 20000 # å•æ–‡ä»¶æœ€å¤§å†…å®¹é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰

# ------------------------------------------
# æ–‡ä»¶ç±»å‹ä¸è·¯å¾„è§„åˆ™
# ------------------------------------------
files:
  extensions:
    - .js
    - .ts
    - .vue
    - .py
    - .java
    - .yml
    - .json
    - .md
    - .sql
  include:
    - 'src/**/*'
    - 'app/**/*'
  exclude:
    - 'dist/**/*'
    - 'node_modules/**/*'
    - 'test/**/*'
    - '**/*.min.js'

# ------------------------------------------
# è§¦å‘è§„åˆ™
# ------------------------------------------
trigger:
  events: # è§¦å‘ç±»å‹ï¼ˆæ”¯æŒ pull_request / pushï¼‰
    - pull_request
    - push
  branches: # é™å®šè§¦å‘åˆ†æ”¯
    - develop
  include_draft: false # æ˜¯å¦åŒ…å« Draft PR

  ignore_rules: # æ’é™¤è§„åˆ™
    title_contains: # PR æ ‡é¢˜åŒ…å«ä»¥ä¸‹å†…å®¹åˆ™è·³è¿‡å®¡æŸ¥
      - WIP
      - Draft
      - DO NOT REVIEW
    branch_matches: # åˆ†æ”¯åŒ¹é…ä»¥ä¸‹è§„åˆ™åˆ™è·³è¿‡å®¡æŸ¥
      - feature/*
      - hotfix/*
      - release/*
      - master
      - main
      - develop

# ------------------------------------------
# é€šçŸ¥ä¸ä»»åŠ¡é›†æˆ
# ------------------------------------------
integrations:
  dingtalk:
    notification:
      enabled: true
      template: |
        ğŸš€ ä»£ç å®¡æŸ¥å®Œæˆ
        çŠ¶æ€: {{ status }}
        é—®é¢˜æ•°: {{ issues }}
        ä¸¥é‡é—®é¢˜: {{ critical }}
        å®¡æŸ¥äºº: AI CodeReviewer

  pingcode:
    notification:
      enabled: true
      template: |
        ğŸš€ ä»£ç å®¡æŸ¥å®Œæˆ
        çŠ¶æ€: {{ status }}
        é—®é¢˜æ•°: {{ issues }}
        ä¸¥é‡é—®é¢˜: {{ critical }}
        å®¡æŸ¥äºº: AI CodeReviewer

    push_summary: # è‡ªåŠ¨å†™å…¥ä»»åŠ¡è‡ªå®šä¹‰å­—æ®µ
      enabled: true
      summary_field: ai_review_summary
      template: |
        ğŸš€ ä»£ç å®¡æŸ¥å®Œæˆ
        çŠ¶æ€: {{ status }}
        é—®é¢˜æ•°: {{ issues }}
        ä¸¥é‡é—®é¢˜: {{ critical }}
        å®¡æŸ¥äºº: AI CodeReviewer

# ------------------------------------------
# å‚è€ƒèµ„æ–™
# ------------------------------------------
references:
  - path: './docs/code-style.md'
  - url: 'https://example.com/security-guidelines'
  - url: 'https://example.com/performance-checklist'
